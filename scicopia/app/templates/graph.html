{% extends "base.html" %}

{% block head %}
  {{ super() }}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="text/css" rel="stylesheet" href="/static/css/base.css">
  <link type="text/css" rel="stylesheet" href="/static/css/search.css">
  <script src="/static/js/citations.js"></script>
  <style type="text/css">
    #sigma-container {
      position: absolute;
      height: 80%;
    }
  </style>
{% endblock %}

{% block page_content %}
<div class="row justify-content-center"><div id="sigma-container" class="col-12 col-md-10 col-lg-8"></div></div>
<script src="/static/js/sigma.min.js"></script>
<script>
    // Let's first initialize sigma:
    var s = new sigma(
        {
            renderer: {
                container: document.getElementById('sigma-container')
            },
            settings: {defaultNodeColor: '#ec5148'}
        }
    );
    let graph = {{ graph |safe }}
    s.graph.read(graph)
    // Finally, let's ask our sigma instance to refresh:
    s.refresh();
    s.bind('clickNode', function(e) {
        citations(e.data.node.label, s);
    });
    </script>
{% endblock %}
